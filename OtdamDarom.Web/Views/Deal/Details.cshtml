@model OtdamDarom.Web.Requests.DealResponse
@using OtdamDarom.Web.Requests

@{
    ViewBag.Title = Model.Name;
    Layout = "~/Views/Shared/_Layout.cshtml";
    var similarDeals = ViewBag.SimilarDeals as IEnumerable<DealResponse>;
}

<title>@Model.Name - Detalii Anunț</title>

<div class="container mt-4">
    <div class="row">
        <div class="col-lg-8">
            <div class="card shadow mb-4">
                <div class="card-body">
                    <h1 class="card-title mb-3">@Model.Name</h1>

                    @if (!string.IsNullOrEmpty(Model.ImageURL))
                    {
                        <div class="main-image-container mb-4">
                            <img src="@Url.Content(Model.ImageURL)" class="img-fluid rounded" alt="@Model.Name" style="width: 100%; height: 500px; object-fit: contain;">
                            @* Poți adăuga aici un carusel dacă ai mai multe imagini pentru un anunț *@
                        </div>
                    }
                    else
                    {
                        <div class="main-image-container mb-4">
                            <img src="@Url.Content("~/Content/Images/default.png")" class="img-fluid rounded" alt="Imagine implicită" style="width: 100%; height: 500px; object-fit: contain;">
                        </div>
                    }

                    <p class="card-text"><strong>Descriere:</strong> @Model.Description</p>

                    @* Aici poți adăuga detalii suplimentare dacă le ai în Model și vrei să le afișezi ca în imaginea 2 (ex: user, categorie, subcategorie)
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <p><strong>Categorie:</strong> @Model.CategoryName</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Subcategorie:</strong> @Model.SubcategoryName</p>
                        </div>
                    </div>
                    *@
                    
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card shadow mb-4">
                <div class="card-body">
                    <h5 class="card-title">Informații Anunț</h5>
                    <p><strong>Data Publicării: @Model.CreationDate.ToString("dd MMMM, HH:mm")</strong></p>
                    @* Aici poți adăuga alte detalii cum ar fi numele utilizatorului, număr de vizualizări etc., dacă sunt disponibile în Model *@
                    <hr />
                    <p class="text-info mb-3">Pentru a solicita acest anunț, apasă butonul "Solicitați Anunțul".</p>
    
                    <div class="d-grid gap-2">

                        <button class="btn btn-success btn-lg btn-block">
                        <i class="fas fa-paper-plane mr-2"></i> Solicitați Anunțul
                        </button>

                        <a href="@Url.Action("Index", "Home")" class="btn btn-secondary btn-block"> @* Fără mb-2 *@
                            <i class="fas fa-arrow-alt-circle-left mr-2"></i> Înapoi la toate anunțurile
                        </a>
        
                        <a href="#" class="btn btn-outline-danger btn-block"> @* Fără mt-3 *@
                            <i class="fas fa-exclamation-triangle mr-2"></i> Reclamă anunțul
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @if (similarDeals != null && similarDeals.Any())
    {
        <div class="row mt-5">
            <div class="col-12">
                <h4 class="mb-4">Anunțuri similare din aceeași categorie:</h4>
                <div class="row">
                    @foreach (var deal in similarDeals)
                    {
                        <div class="col-12 col-sm-6 col-md-3 mb-4">
                            <div class="card shadow h-100">
                                @if (!string.IsNullOrEmpty(deal.ImageURL))
                                {
                                    <img src="@Url.Content(deal.ImageURL)" class="card-img-top" alt="@deal.Name" style="height: 150px; object-fit: cover;">
                                }
                                else
                                {
                                    <img src="@Url.Content("~/Content/Images/default.png")" class="card-img-top" alt="Imagine implicită" style="height: 150px; object-fit: cover;">
                                }
                                <div class="card-body d-flex flex-column">
                                    <h6 class="card-title mb-1 text-truncate">@deal.Name</h6> @* text-truncate pentru titluri lungi *@
                                    <p class="card-text text-muted small mb-2 text-truncate">@deal.Description</p>
                                    <a href="@Url.Action("Details", "Deal", new { id = deal.Id })" class="btn btn-sm btn-outline-success mt-auto">Vezi Detalii</a>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    }
</div>